webpackJsonp([15],{"8v5g":function(t,e){t.exports=PIXI},"B4+P":function(t,e){t.exports='<div ng-controller=GameCtrl class="game-screen game-screen--spatial-span"> <wg-menu></wg-menu> <wg-answer-result></wg-answer-result> <div ui-view=stages></div> <div class="spatial-span spatial-span--animation"> <div class=spatial-span__inner ng-if="$root.countDown.left == 0 || gameState.matrix.length > 0" ng-class=gameState.innerClass> <div class=spatial-span__line ng-repeat="line in gameState.matrix.tiles"> <button class=spatial-span__lamp ng-click=answer(tile) ng-disabled=!tile.enabled ng-class=tile.getClasses() ng-repeat="tile in line"> <svg class=spatial-span__icon viewBox="0 0 62 68" width=62 height=69> <g class=lamp-stroke> <g> <ellipse fill=#fff cx=30.36 cy=60.95 rx=15.67 ry=7.33 /> <polygon fill=#fff points="14.68 57.42 14.68 60.95 18.86 63.3 46.03 60.95 46.03 57.42 14.68 57.42"/> <path fill=#fff d=M46,57.42c0,4-7,7.33-15.67,7.33s-15.67-3.28-15.67-7.33l9.27-6.85H36.76Z /> </g> <rect fill=#fff x=23.16 y=42.08 width=14.38 height=14.03 /> <g> <rect fill=#fff x=15.45 y=34.12 width=3.99 height=12.83 /> <circle fill=#fff cx=17.44 cy=48.44 r=3.19 /> </g> <g> <polygon fill=#fff points="10.31 5.87 -0.26 34.44 60.99 34.44 50.49 5.87 10.31 5.87"/> <ellipse fill=#fff cx=30.4 cy=5.87 rx=20.09 ry=4.94 /> <ellipse fill=#fff cx=30.4 cy=6.83 rx=18.12 ry=3.98 /> <ellipse fill=#fff cx=30.4 cy=34.44 rx=30.66 ry=8.78 /> </g> </g> <g class=lamp-switch> <rect class=lamp-switch-item fill=#17b4ad x=16.5 y=39.49 width=1.89 height=7.45 /> <circle class=lamp-switch-item fill=#17b4ad cx=17.44 cy=48.46 r=2 /> </g> <g class=lamp-body> <ellipse class=lamp-body-item fill=#016a67 cx=30.36 cy=52.08 rx=5.25 ry=2.46 /> <rect class=lamp-body-item fill=#016a67 x=25.18 y=39.8 width=10.35 height=12.49 /> </g> <g class=lamp-bottom> <ellipse class=color-dark fill=#006964 cx=30.36 cy=60.59 rx=12.85 ry=6.01 /> <polygon class=color-dark fill=#006964 points="17.51 57.69 17.51 60.59 20.93 62.52 43.2 60.59 43.2 57.69 17.51 57.69"/> <path class=color-light fill=#1b887e d=M43.2,57.69c0,3.32-5.75,6-12.85,6s-12.85-2.69-12.85-6l7.6-5.61h10.5Z /> </g> <g class=lamp-shade> <polygon class=color-light fill=#8accc8 points="12.13 7.16 2.52 33.14 58.21 33.14 48.67 7.16 12.13 7.16"/> <ellipse class=color-light fill=#8accc8 cx=30.4 cy=33.14 rx=27.88 ry=7.98 /> <ellipse class=color-medium fill=#19b7ad cx=30.4 cy=7.16 rx=18.27 ry=4.49 /> <ellipse class=color-dark fill=#1e8681 cx=30.4 cy=8.03 rx=16.47 ry=3.62 /> </g> </svg> </button> </div> </div> </div> </div> '},D2yp:function(t,e,i){"use strict";angular.module("wgGame").config(["$stateProvider",function(t){t.state("game",{views:{pages:{templateUrl:"game-container.html"},"container@game":{template:i("B4+P")}}})}])},HWZb:function(t,e){t.exports=p2},HbCL:function(t,e,i){"use strict";i("/jXN").module("wgGame",["wgCore"]).constant("gameName","spatial-span")},KW89:function(t,e,i){"use strict";var a,l;a=[i("/jXN")],void 0!==(l=function(t){function e(t,e,i,a,l){i.title="game.training_task",i.gameState=null,e.when(a.buildInitialGameState()).then(function(t){function e(a,n){n=n||0,a[n]?(i.$apply(a[n].highlight()),l(function(){i.$apply(a[n].normal()),e(a,++n)},800)):i.$apply(function(){t.matrix.asArray().forEach(function(t){t.enabled=!0}),i.title="game.training_answer"})}i.gameState=t,t.matrix=a.createMatrix(3,3),t.currentIndex=0;var n=t.matrix.asArray().shuffle().take(3),s=0;t.itemsCount=n.length,n.forEach(function(e){e.index=s,e.getClasses=function(){return{"spatial-span__lamp--active":e.highlighted,enabled:e.enabled,"spatial-span__lamp--done":e.answered&&e.correctness,"spatial-span__lamp--error":e.answered&&!e.correctness,"spatial-span__lamp--answer":e.enabled&&!e.answered&&t.currentIndex===e.index}},s++}),l(function(){e(n)},1e3),t.currentIndex=0}),i.answer=function(e){e.index===i.gameState.currentIndex&&(i.gameState.currentIndex++,e.right()),i.gameState.currentIndex===i.gameState.itemsCount&&t.go("game")}}t.module("wgGame").config(["$stateProvider",function(t){t.state("game-training",{views:{pages:{template:i("sh5C"),controller:["$state","$q","$scope","MatchGameStrategy","$timeout",e]}}})}])}.apply(e,a))&&(t.exports=l)},WrSH:function(t,e,i){"use strict";angular.module("wgGame").run(["$state",function(t){t.go("loading")}])},XHKy:function(t,e){},kFww:function(t,e,i){"use strict";angular.module("wgGame").service("MatchGameStrategy",["wgProperties","wgWaitSeconds","$q","$timeout","wgImagePreloader","wgGameOverOnTime","$rootScope",function(t,e,i,a,l,n,s){function r(t,i){i=i||0;var a=t[i];if(!a)return void o();y?y.then(function(){r(i)}):(a.highlight(),e(.8)().then(function(){a.normal(),r(t,++i)}))}function c(t,e){for(var i=[],a=0;a<e;a++){for(var l=[],n=0;n<t;n++){var s=new h({x:n,y:a});l.push(s)}i.push(l)}return new p(t,e,i)}function o(){d.matrix.asArray().forEach(function(t){t.enabled=!0})}function f(){d.matrix.asArray().forEach(function(t){t.enabled=!1})}function g(){d.matrix=null}function p(t,e,i){this.n=t,this.m=e,this.tiles=i}function h(t){this.index=-1,this.x=t.x,this.y=t.y,this.enabled=!1,this.highlighted=!1,this.answered=!1,this.correctness=!1}var u,d={matrix:null},m=t.build();this.buildInitialGameState=function(){return d={matrix:null},u=i.all([e(m.getProperty("timing.delayBetweenGameStart"))().then()]).then(function(){d.innerClass="spatial-span__inner--animation"}),d};var y,x;s.$on("pause-on",function(){x=i.defer(),y=x.promise}),s.$on("pause-off",function(){y&&x&&(y=null,x.resolve())}),this.buildGameState=function(){var t=m.getProperty("matrix.width"),e=m.getProperty("matrix.height"),l=m.getProperty("items.count"),n=(m.getProperty("items.delayOfShowingHighlight"),c(t,e)),s=n.asArray().shuffle().take(l),o=0;return i.when(u).then(function(){s.forEach(function(t){t.index=o,o++}),d.matrix=n,d.itemsCount=l,d.failCount=0,d.currentIndex=0,a(function(){r(s)},500)})},this.highlight=r,this.createMatrix=c,this.handleAnswer=function(t){if(t.answered)return!1;var a=i.defer(),l=t.index===d.currentIndex;return l?(d.currentIndex++,t.right(),a.resolve(l)):(d.failCount++,t.wrong(),d.matrix.forEachTile(function(t){t.index==d.currentIndex&&t.highlight()}),e(m.getProperty("timing.delayAfterWrongAnswer"))().then(function(){a.resolve(l)})),a.promise},this.isReadyForNextState=function(){return d.currentIndex>=d.itemsCount||d.failCount>0},this.destroyGameState=function(){return f(),e(m.getProperty("timing.delayForHidingMatrix"))().then(g).then(e(m.getProperty("timing.delayBeforeStartNextLevel")))},this.enableTiles=o,p.prototype.forEachTile=function(t){for(var e=0;e<this.m;e++)for(var i=0;i<this.n;i++)t(this.tiles[e][i])},p.prototype.asArray=function(){var t=[];return this.forEachTile(function(e){t.push(e)}),t},p.prototype.getTile=function(t,e){if(t>=this.x)throw new Error("x out of range");if(e>=this.y)throw new Error("y out of range");return this.tiles[e][t]},h.prototype.getClasses=function(){return(this.highlighted?"spatial-span__lamp--active ":"")+(this.enabled?"enabled ":"")+(this.answered?this.correctness?"spatial-span__lamp--done":"spatial-span__lamp--error":"")},h.prototype.highlight=function(){this.highlighted=!0},h.prototype.normal=function(){this.highlighted=!1},h.prototype.cleanAnswer=function(){this.answered=!1},h.prototype.wrong=function(){this.answered=!0,this.correctness=!1},h.prototype.right=function(){this.answered=!0,this.correctness=!0}}])},sh5C:function(t,e){t.exports='<div class="game-training game-screen game-screen--spatial-span"> <div class="game-screen__title game-training__title"> {{ title|translate }} </div> <div class="spatial-span spatial-span--animation"> <div class=spatial-span__inner ng-class=gameState.innerClass> <div class=spatial-span__line ng-repeat="line in gameState.matrix.tiles"> <button class=spatial-span__lamp ng-click=answer(tile) ng-disabled=!tile.enabled ng-class=tile.getClasses() ng-repeat="tile in line"> <svg class=spatial-span__icon viewBox="0 0 62 68" width=62 height=69> <g class=lamp-stroke> <g> <ellipse fill=#fff cx=30.36 cy=60.95 rx=15.67 ry=7.33 /> <polygon fill=#fff points="14.68 57.42 14.68 60.95 18.86 63.3 46.03 60.95 46.03 57.42 14.68 57.42"/> <path fill=#fff d=M46,57.42c0,4-7,7.33-15.67,7.33s-15.67-3.28-15.67-7.33l9.27-6.85H36.76Z /> </g> <rect fill=#fff x=23.16 y=42.08 width=14.38 height=14.03 /> <g> <rect fill=#fff x=15.45 y=34.12 width=3.99 height=12.83 /> <circle fill=#fff cx=17.44 cy=48.44 r=3.19 /> </g> <g> <polygon fill=#fff points="10.31 5.87 -0.26 34.44 60.99 34.44 50.49 5.87 10.31 5.87"/> <ellipse fill=#fff cx=30.4 cy=5.87 rx=20.09 ry=4.94 /> <ellipse fill=#fff cx=30.4 cy=6.83 rx=18.12 ry=3.98 /> <ellipse fill=#fff cx=30.4 cy=34.44 rx=30.66 ry=8.78 /> </g> </g> <g class=lamp-switch> <rect class=lamp-switch-item fill=#17b4ad x=16.5 y=39.49 width=1.89 height=7.45 /> <circle class=lamp-switch-item fill=#17b4ad cx=17.44 cy=48.46 r=2 /> </g> <g class=lamp-body> <ellipse class=lamp-body-item fill=#016a67 cx=30.36 cy=52.08 rx=5.25 ry=2.46 /> <rect class=lamp-body-item fill=#016a67 x=25.18 y=39.8 width=10.35 height=12.49 /> </g> <g class=lamp-bottom> <ellipse class=color-dark fill=#006964 cx=30.36 cy=60.59 rx=12.85 ry=6.01 /> <polygon class=color-dark fill=#006964 points="17.51 57.69 17.51 60.59 20.93 62.52 43.2 60.59 43.2 57.69 17.51 57.69"/> <path class=color-light fill=#1b887e d=M43.2,57.69c0,3.32-5.75,6-12.85,6s-12.85-2.69-12.85-6l7.6-5.61h10.5Z /> </g> <g class=lamp-shade> <polygon class=color-light fill=#8accc8 points="12.13 7.16 2.52 33.14 58.21 33.14 48.67 7.16 12.13 7.16"/> <ellipse class=color-light fill=#8accc8 cx=30.4 cy=33.14 rx=27.88 ry=7.98 /> <ellipse class=color-medium fill=#19b7ad cx=30.4 cy=7.16 rx=18.27 ry=4.49 /> <ellipse class=color-dark fill=#1e8681 cx=30.4 cy=8.03 rx=16.47 ry=3.62 /> </g> </svg> </button> </div> </div> </div> </div>'},tzQp:function(t,e){t.exports=Phaser},wy9p:function(t,e,i){"use strict";i("HbCL"),i("D2yp"),i("kFww"),i("6Tig"),i("XHKy"),i("WrSH"),i("KW89")}},["wy9p"]);