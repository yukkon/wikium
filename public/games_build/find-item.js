webpackJsonp([29],{"0z3f":function(e,t,i){"use strict";var n,a;n=[i("/jXN")],void 0!==(a=function(e){function t(e,t,i,n,a){var s=0;t.gameState=i.buildInitialGameState(),t.answer=function(n){n==t.gameState.requested&&i.handleAnswer(n)&&(s++,s>3?e.go("game"):i.destroyGameState().then(function(){return i.buildGameState()}))},t.mapGameStateToAnswer=function(){return i.mapGameStateToAnswer()},n(function(){i.buildGameState()},0)}e.module("wgGame").config(["$stateProvider",function(e){e.state("game-training",{views:{pages:{template:i("DJc7"),controller:["$state","$scope","MatchGameStrategy","$timeout","$document",t]}}})}])}.apply(t,n))&&(e.exports=a)},"7HJT":function(e,t,i){"use strict";i("t2If"),i("S3Pi"),i("yCRb"),i("6Tig"),i("kycP"),i("vS2P"),i("0z3f")},"8v5g":function(e,t){e.exports=PIXI},DJc7:function(e,t){e.exports='<div class="game-screen game-screen--find-item"> <div class=find-item ng-class="{\'game-state-start\': !gameState.init, \'game-state-init\': gameState.init && gameState.answer}"> <div class=find-item__pictures ng-class=gameState.answerClass> <div class="find-item__frame find-item__frame--landscape"></div> <div class="find-item__frame find-item__frame--main"> <div class=find-item__flicker></div> <div class=find-item__picture> <div class=find-item__icon-wrap> <svg ng-if="shape == gameState.requested" ng-repeat="shape in gameState.shapes track by $index" class="find-item__icon find-item__icon--main"> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href="" ng-href="{{\'/games_build/images/icons/find-item-symbols.svg#icon-\' + shape}}"></use> </svg> </div> </div> </div> <div class="find-item__frame find-item__frame--portrait"></div> </div> <div class=find-item__container> <div ng-repeat="(i,row) in gameState.answers track by $index" class=find-item__row> <button ng-repeat="(j,item) in row track by $index" class=find-item__cell type=button ng-click="item.img ? answer(item.img) : null"> <svg ng-class="{\'game-answer-hint\': item.img == gameState.requested && !gameState.answer}" class=find-item__icon ng-repeat="shape in gameState.shapes track by $index" ng-if="shape == item.img" ng-click=answer(item.img)> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href="" ng-href="{{\'/games_build/images/icons/find-item-symbols.svg#icon-\' + shape}}"></use> </svg> </button> </div> </div> </div> </div> '},HUye:function(e,t){e.exports='<div ng-controller=GameCtrl class="game-screen game-screen--find-item"> <wg-menu></wg-menu> <wg-answer-result></wg-answer-result> <div ui-view=stages></div> <div class=find-item ng-class="{\'game-state-start\': !gameState.init, \'game-state-init\': gameState.init && gameState.answer}"> <div class=find-item__pictures ng-class=gameState.answerClass> <div class="find-item__frame find-item__frame--landscape"></div> <div class="find-item__frame find-item__frame--main"> <div class=find-item__flicker></div> <div class=find-item__picture> <div class=find-item__icon-wrap> <svg ng-if="shape == gameState.requested" ng-repeat="shape in gameState.shapes track by $index" class="find-item__icon find-item__icon--main"> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href="" ng-href="{{\'/games_build/images/icons/find-item-symbols.svg#icon-\' + shape}}"></use> </svg> </div> </div> </div> <div class="find-item__frame find-item__frame--portrait"></div> </div> <div class=find-item__container> <div ng-repeat="(i,row) in gameState.answers track by $index" class=find-item__row> <button ng-repeat="(j,item) in row track by $index" class=find-item__cell type=button ng-click="item.img ? answer(item.img) : null"> <svg class=find-item__icon ng-repeat="shape in gameState.shapes track by $index" ng-if="shape == item.img" ng-click=answer(item.img)> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href="" ng-href="{{\'/games_build/images/icons/find-item-symbols.svg#icon-\' + shape}}"></use> </svg> </button> </div> </div> </div> </div> '},HWZb:function(e,t){e.exports=p2},S3Pi:function(e,t,i){"use strict";angular.module("wgGame").config(["$stateProvider",function(e){e.state("game",{views:{pages:{templateUrl:"game-container.html"},"container@game":{template:i("HUye")}}})}])},kycP:function(e,t){},t2If:function(e,t,i){"use strict";i("/jXN").module("wgGame",["hmTouchEvents","wgCore"]).constant("gameName","find-item")},tzQp:function(e,t){e.exports=Phaser},vS2P:function(e,t,i){"use strict";angular.module("wgGame").run(["$state",function(e){e.go("firstGameIframe"==window.name?"screen11":"loading")}])},yCRb:function(e,t,i){"use strict";var n=i("d7EF"),a=function(e){return e&&e.__esModule?e:{default:e}}(n);angular.module("wgGame").service("MatchGameStrategy",["$rootScope","wgError","wgProperties","wgWaitSeconds","$timeout","$q",function(e,t,i,n,s,r){function o(){var e=l(),t=e.width,i=e.height,n=e.countOfBoxes,s=m(t,i,n),r=(0,a.default)(s,1),o=r[0];w.boxes=o,c()}function c(){w.answers.forEach(function(e){return e.forEach(function(e){e.img=null})}),w.boxes.forEach(function(e){w.answers[e.m][e.n].img=e.img})}function m(e,i,n){var a=f(e,i),s=a.shuffle().take(n),r=x.shuffle().slice();return s.forEach(function(e){var i=r.pop();angular.isUndefined(i)&&t.throw("Don't have enough of available images!"),e.img=i}),[s,a]}function f(e,t){for(var i=[],n=0;n<t;n++)for(var a=0;a<e;a++)i.push(new p(a,n));return i}function l(){return{width:b.getProperty("matrix.width")||6,height:b.getProperty("matrix.height")||3,countOfBoxes:b.getProperty("matrix.countOfBoxes")||4}}function u(){var e,t,i,n,a=l(),s=a.width,r=a.height,o=x.shuffle().slice(),c=0;do{if(t=Math.randInt(s-1),i=Math.randInt(r-1),c++>100)return}while(!d(t,i));do{n=o.pop()}while(!g(n));e=new p(t,i),e.img=n,w.boxes.splice(0,0,e)}function d(e,t){return!w.boxes.some(function(i){return i.n===e&&i.m===t})}function g(e){return!w.boxes.some(function(t){return t.img===e})}function h(){w.requested=w.boxes.last().img}function p(e,t){this.n=e,this.m=t,this.opened=!0,this.visible=!0,this.enabled=!0}var w,v,b=i.build(),x=["ball","basket","book","camera","clip","cloud","coffee","cutlery","film","flag","flower","headphone","home","mail","message","microphone","mosaic","phone","rain","shoe","sunny","tea","text","trash","tv","txt","umbrella","watch","wineglass"];this.buildInitialGameState=function(){w={boxes:null,matrix:null,correct:!1,init:!1,shapes:x,answer:!1};var e=l();return w.answers=_.chunk(_.times(e.width*e.height,function(){return{}}),e.width),w},this.buildGameState=function(){return v&&v.resolve(),v=r.defer(),w.answer=w.init,n(w.init?.2:0)().then(function(){w.correct||(o(),w.correct=!0),h(),s(function(){w.init=!0,w.answer=!1},700)})},this.handleAnswer=function(e){if(w.correct=e==w.requested,w.correct){w.boxes.pop();for(var t=l().countOfBoxes;w.boxes.length<t;)u();c()}return w.correct},this.isReadyForNextState=function(){return!0},this.isOver=function(){return!v.promise||v.promise},this.destroyGameState=function(){return v.resolve(),r.when()},e.$on("show-answer-is-right",function(){w.answerClass="game-state-answer-good",s(function(){w.answerClass=null},300)}),e.$on("show-answer-is-wrong",function(){w.answerClass="game-state-answer-bad",s(function(){w.answerClass=null},300)}),p.prototype.getStyle=function(){return{position:"absolute",left:70*this.n+"px",top:70*this.m+"px"}},p.prototype.getClass=function(){return(this.opened?"box-open ":"box-close ")+(this.visible?"box-visible":"box-hidden")},p.prototype.open=function(){this.opened=!0},p.prototype.close=function(){this.opened=!1},p.prototype.hide=function(){this.visible=!1}}])}},["7HJT"]);