webpackJsonp([13],{"6sVi":function(e,t,n){"use strict";angular.module("wgGame").config(["$stateProvider",function(e){e.state("game",{views:{pages:{templateUrl:"game-container.html"},"container@game":{template:n("LzZ3")}}})}])},"8v5g":function(e,t){e.exports=PIXI},HWZb:function(e,t){e.exports=p2},IsaP:function(e,t){},LzZ3:function(e,t){e.exports='<div ng-controller=GameCtrl class="game-screen game-screen--what-colors-more"> <wg-menu></wg-menu> <wg-answer-result></wg-answer-result> <div ui-view=stages></div> <div class=what-colors-more> <div class=what-colors-more__inner> <h5 class="what-colors-more__task-text game-screen__task" ng-bind-html="\'game.title\'|translate"></h5> <div class=what-colors-more__items-wrap ng-class=gameState.matrixClass ng-if=gameState.init> <div class=what-colors-more__items ng-class="{\'what-colors-more__items--come\': gameState.init || !gameState.answer, \'what-colors-more__items--leave\': gameState.answer}"> <div ng-style="{visibility: gameState.hidden ? \'hidden\' : \'visible\'}" ng-repeat="item in gameState.items" ng-class="\'what-colors-more__item what-colors-more__item--\' + item.color"> <svg ng-if=item.color class=what-colors-more__item-inner width=35 fill=currentColor> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href="" ng-href="{{\'/games_build/images/icons/what-colors-more-symbols.svg#\' + item.shape}}"></use> </svg> </div> </div> </div> </div> <div class=button-set> <button ng-repeat="btn in gameState.buttons" class="{{\'button-set__item button-set__item--\' + btn.cls}}" ng-class="{\'button-set__item--active\':btn.active}" ng-click=answer(btn.answer) type=button> <span class=button-set__icon> <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 14 24"> <path d="M.5 17v4.6c0 1.8 1.2 2.53 2.65 1.63l9.46-9.57a1.76 1.76 0 0 0 0-3.26L3.15.88C1.7 0 .5.72.5 2.52V17zm0-14.48"/> </svg> </span> <span class=button-set__text>{{ btn.text|translate|capitalize }}</span> </button> </div> </div> </div> '},Nhlj:function(e,t,n){"use strict";n("/jXN").module("wgGame",["wgCore"]).constant("gameName","what-colors-more")},QmWE:function(e,t,n){"use strict";var a,s;a=[n("/jXN")],void 0!==(s=function(e){function t(e,t,n,a){function s(e,a){t.answer(n.mapKeyToAnswer(a))}var i=0;t.isTraining=!0,t.gameState=n.buildInitialGameState(),t.answer=function(s){s===t.mapGameStateToAnswer()&&(a(function(){return n.handleAnswer(s)},0),i++,i>1?e.go("game"):n.buildGameState(t.isTraining))},t.$on("keydown",s),t.mapGameStateToAnswer=function(){return n.mapGameStateToAnswer()},a(function(){n.buildGameState(t.isTraining)},0)}e.module("wgGame").config(["$stateProvider",function(e){e.state("game-training",{views:{pages:{template:n("RRt9"),controller:["$state","$scope","MatchGameStrategy","$timeout",t]}}})}])}.apply(t,a))&&(e.exports=s)},RRt9:function(e,t){e.exports='<div class="game-screen game-screen--what-colors-more"> <div class=what-colors-more> <div class=what-colors-more__inner> <h3 class="what-colors-more__task-text game-screen__task">{{\'game.title\'|translate|capitalize}}</h3> <div class=what-colors-more__items-wrap ng-class=gameState.matrixClass ng-if=gameState.init> <div class=what-colors-more__items ng-class="{\'what-colors-more__items--come\': gameState.init || !gameState.answer, \'what-colors-more__items--leave\': gameState.answer}"> <div ng-style="{visibility: gameState.hidden ? \'hidden\' : \'visible\'}" ng-repeat="item in gameState.items" ng-class="\'what-colors-more__item what-colors-more__item--\' + item.color"> <svg ng-if=item.color class=what-colors-more__item-inner width=35 fill=currentColor> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href="" ng-href="{{\'/games_build/images/icons/what-colors-more-symbols.svg#\' + item.shape}}"></use> </svg> </div> </div> </div> </div> <div class=button-set> <button ng-repeat="btn in gameState.buttons" class="{{\'button-set__item button-set__item--\' + btn.cls}}" ng-class="{\'button-set__item--active\':btn.active, \'game-answer-hint\': isTraining && gameState.currentAnswer == btn.answer && !gameState.answer}" ng-click=answer(btn.answer) type=button> <span class=button-set__icon> <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 14 24"> <path d="M.5 17v4.6c0 1.8 1.2 2.53 2.65 1.63l9.46-9.57a1.76 1.76 0 0 0 0-3.26L3.15.88C1.7 0 .5.72.5 2.52V17zm0-14.48"/> </svg> </span> <span class=button-set__text>{{ btn.text|translate|capitalize }}</span> </button> </div> </div> </div> '},jK3R:function(e,t,n){"use strict";var a=n("d7EF"),s=function(e){return e&&e.__esModule?e:{default:e}}(a);angular.module("wgGame").service("MatchGameStrategy",["$rootScope","wgProperties","$timeout","wgWaitSeconds","$q",function(e,t,n,a,i){function r(e,t,n){var a=void 0,s=void 0,i=void 0,r=void 0,o=void 0,l=void 0;return n?(a=0===w,w++):a=2===_.random(2),s=_.shuffle(c),i=_.reverse(_.range(c.length).map(function(t){return e+(a?0:t)})),r=_.chain(s).zip(i).flatMap(function(e){return _.times(e[1],function(){return e[0]})}).value(),o=_.times(t-r.length,function(){return""}),l=_.concat(r,o),[a?"equal":s[0],_.shuffle(l.map(function(e){return{color:e,shape:_.sample(u)}}))]}var o,l,m=t.build(),c=["red","blue"],u=["triangle","circle","square","star"],g=[{cls:"left",answer:c[0],text:"game.red"},{cls:"right",answer:c[1],text:"game.blue"},{cls:"down",answer:"equal",text:"game.equal"}],w=0;this.buildInitialGameState=function(){return l={init:!1,answer:!1,items:[],shapes:u,currentAnswer:"",buttons:g}},this.buildGameState=function(e){return o&&o.resolve(),o=i.defer(),l.answer=l.init,a(l.init?.4:0)().then(function(){l.init=!0,l.answer=!1;var t=m.getProperty("matrix.n")||4,a=m.getProperty("matrix.m")||4,i=m.getProperty("matrix.numberOfElements")||2,o=r(i,t*a,e),c=(0,s.default)(o,2),u=c[0],g=c[1];l.currentAnswer=u,l.items=g,l.hidden=!0,n(function(){l.hidden=!1},500);var w=t*a;return l.matrixClass=w<49?"what-colors-more__items-wrap--low-level":w>65?"what-colors-more__items-wrap--high-level":"what-colors-more__items-wrap--middle-level",l})},this.mapGameStateToAnswer=function(){return l.currentAnswer},this.handleAnswer=function(e){var t=_.find(g,function(t){return t.answer===e});return t.active=!0,n(function(){return t.active=!1},300),!0},this.isOver=function(){return!o.promise||o.promise},this.handleAnswerResult=function(e,t){return o.resolve(),!0},this.mapKeyToAnswer=function(e){switch(e){case 40:return"equal";case 39:return c[1];case 37:return c[0]}}}])},l0pt:function(e,t,n){"use strict";angular.module("wgGame").run(["$state",function(e){e.go("firstGameIframe"==window.name?"screen11":"loading")}])},qnRK:function(e,t,n){"use strict";n("Nhlj"),n("6sVi"),n("jK3R"),n("pRCW"),n("IsaP"),n("l0pt"),n("QmWE")},tzQp:function(e,t){e.exports=Phaser}},["qnRK"]);