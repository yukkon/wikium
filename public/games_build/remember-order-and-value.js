webpackJsonp([18],{"+r05":function(e,t,r){"use strict";angular.module("wgGame").run(["$state",function(e){e.go("loading")}])},"4dbc":function(e,t,r){"use strict";angular.module("wgGame").service("MatchGameStrategy",["$rootScope","MatrixService","wgProperties","wgWaitSeconds","$timeout","$q",function(e,t,r,n,a,i){function s(){var t=T.getProperty("matrix")||{n:2,m:2,hidden:2,minNumber:1,maxNumber:9,"strictOrder ":1};if(e.isMobile&&t.n>t.m){var r=angular.copy(t);return r.n=t.m,r.m=t.n,r}return t}function l(){var e=s();w.matrix=o(e.n,e.m)}function o(e,t){for(var r=[],n=0;n<t;n++){for(var a=[],i=0;i<e;i++){var s={x:i,y:n,value:0,enabled:!1,class:"before-create",hidden:!1,open:!1};m(s,500*Math.random()),a.push(s)}r.push(a)}return new b(e,t,r)}function m(e,t){a(function(){e.class="create"},t)}function u(){var e=s(),t=e.hidden,r=e.n,n=e.m;for(_=t,x=e.minNumber;t>0;){var a=Math.floor(Math.random()*r),i=Math.floor(Math.random()*n),l=w.matrix.getTile(a,i);l.hidden||(l.hidden=!0,l.value=x++,w.numbers.push(l.value),t--)}}function c(){w.matrix.forEachTile(function(e){e.hidden&&(e.class="show-as-hidden")})}function d(){w.iremember_enabled=!1;var e=[];w.matrix.forEachTile(function(t){t.class="",t.hidden&&e.push(t)})}function g(){w.matrix.forEachTile(function(e){e.class="clickable",e.enabled=!0})}function v(){w.matrix.forEachTile(function(e){e.enabled=!1,e.hidden||e.open||(e.class="")})}function h(){w.matrix=null}function f(){w.numbers=[]}function b(e,t,r){this.n=e,this.m=t,this.tiles=r;var n=Math.min(e,t),a=Math.max(e,t);this.matrixClass=n>=5&&a>=8?"remember-order-and-value--large":"",this.helperClass=e*t>=30?"remember-order-and-value--helper":""}var p,w,_,x,S,y,G=this,T=r.build();this.buildInitialGameState=function(){return w={matrix:null,init:!1,complete:!1,answer:!1,numbers:[]},w.IRemember=function(){y&&w.iremember_enabled&&(w.iremember_enabled=!1,y.resolve())},w},this.buildGameState=function(){S&&S.resolve(),S=i.defer(),y=i.defer();var e=T.getProperty("timing.delayBeforeHideTiles")||2;return n(w.init?.5:0)().then(function(){return w.answer=!0,w.iremember_enabled=!1,w.complete=!1,h(),f(),a(function(){w.init=!0,l()},0)}).then(n(1)).then(function(){return w.answer=!1,u(),c(),p=setTimeout(function(){w.iremember_enabled&&y.resolve()},1e3*e),w.iremember_enabled=!0,y.promise}).then(d).then(g)},this.handleAnswer=function(e){clearTimeout(p),--_,e.enabled=!1,e.open=!0;var t=e.hidden,r=w.numbers.shift();if(t){if(e.value==r)return e.class="open right",_<=0&&(e.success=!0),!0;e.class="open wrong number"}else e.class="open wrong";return e.error=!0,w.matrix.forEachTile(function(e){e.value==r&&(e.showAnswer=!0)}),_=0,!1},this.isComplete=function(){return _<=0},this.isReadyForNextState=function(){return!!G.isComplete()&&(v(),a(function(){return w.complete=!0,!0},500))},this.isOver=function(){return!S.promise||S.promise},this.destroyGameState=function(){return n(.1)().then(function(){S.resolve()})},b.prototype.forEachTile=function(e){for(var t=0;t<this.m;t++)for(var r=0;r<this.n;r++)e(this.tiles[t][r])},b.prototype.getTile=function(e,t){if(e>=this.x)throw new Error("x out of range");if(t>=this.y)throw new Error("y out of range");return this.tiles[t][e]}}]),angular.module("wgGame").service("MatrixService",function(){return{width:0,height:0}}),angular.module("wgGame").controller("MatrixCtrl",["MatrixService","$scope",function(e,t){t.style={width:"",height:""},t.data=e,t.$watch("data.top",function(e){t.style.top=e+"px"}),t.$watch("data.width",function(e){t.style.width=e+"px",t.style.opacity=e>0?1:0}),t.$watch("data.height",function(e){t.style.height=e+"px"})}])},"5D5j":function(e,t,r){"use strict";var n,a;n=[r("/jXN")],void 0!==(a=function(e){function t(e,t,r,n){var a=0;t.gameState=r.buildInitialGameState(),t.answer=function(n){n.value===t.gameState.numbers[0]&&(r.handleAnswer(n),r.isComplete()&&(a++,a>2?e.go("game"):r.destroyGameState().then(function(){return r.buildGameState()})))},t.mapGameStateToAnswer=function(){return r.mapGameStateToAnswer()},n(function(){r.buildGameState()},0)}e.module("wgGame").config(["$stateProvider",function(e){e.state("game-training",{views:{pages:{template:r("h16y"),controller:["$state","$scope","MatchGameStrategy","$timeout",t]}}})}])}.apply(t,n))&&(e.exports=a)},"8v5g":function(e,t){e.exports=PIXI},CnNe:function(e,t,r){"use strict";r("/jXN").module("wgGame",["wgCore"]).constant("gameName","remember-order-and-value")},"H+Zn":function(e,t,r){"use strict";angular.module("wgGame").config(["$stateProvider",function(e){e.state("game",{views:{pages:{templateUrl:"game-container.html"},"container@game":{template:r("ZnR9")}}})}])},HWZb:function(e,t){e.exports=p2},RNTF:function(e,t,r){"use strict";r("CnNe"),r("H+Zn"),r("4dbc"),r("6Tig"),r("U5U4"),r("+r05"),r("5D5j")},U5U4:function(e,t){},ZnR9:function(e,t){e.exports='<div ng-controller=GameCtrl class="game-screen game-screen--remember-order-and-value" ng-class="{\'game-state-init\': gameState.answer}"> <wg-menu></wg-menu> <div ui-view=stages></div> <div class=remember-order-and-value ng-class="gameState.matrix.matrixClass + \' \' + gameState.matrix.helperClass"> <div class=remember-order-and-value__inner> <h5 class="game-screen__instruction remember-order-and-value__instruction" ng-bind-html="\'game.title\'|translate"> </h5> <div class=remember-order-and-value__container ng-if=gameState.init> <div class=remember-order-and-value__row ng-repeat="line in gameState.matrix.tiles"> <div class=remember-order-and-value__cell role=button ng-click="tile.enabled ? answer(tile) : null" ng-repeat="tile in line" ng-class="{\'is-target\': (tile.value > 0 && gameState.iremember_enabled) || (!tile.error && !tile.success && tile.open) || tile.showAnswer , \'is-success\': tile.success, \'is-fail\': tile.error}"> <div class=remember-order-and-value__empty></div> <div ng-show=!gameState.complete class=remember-order-and-value__number>{{tile.value > 0 ? tile.value : null}}</div> </div> </div> </div> <button class=remember-order-and-value__btn ng-click=gameState.IRemember() ng-class="{ \'remember-order-and-value__btn--hidden\': !gameState.iremember_enabled }" ng-disabled=!gameState.iremember_enabled> {{ \'game.remember\'|translate|capitalize }} </button> </div> </div> <wg-answer-result></wg-answer-result> </div> '},h16y:function(e,t){e.exports='<div class="game-screen game-training game-screen--remember-order-and-value" ng-class="{\'game-state-init\': gameState.answer}"> <div class=remember-order-and-value ng-class=gameState.matrix.matrixClass> <div class=remember-order-and-value__inner> <h5 class="game-screen__instruction remember-order-and-value__instruction" ng-bind-html="\'game.title\'|translate"> </h5> <div class=remember-order-and-value__container ng-if=gameState.init> <div class=remember-order-and-value__row ng-repeat="line in gameState.matrix.tiles"> <div class=remember-order-and-value__cell ng-click="tile.enabled ? answer(tile) : null" role=button ng-repeat="tile in line" ng-class="{\'is-target\': (tile.value > 0 && gameState.iremember_enabled) || (!tile.error && !tile.success && tile.open) || tile.showAnswer, \'is-success\': tile.success, \'is-fail\': tile.error, \'game-answer-hint\': !gameState.iremember_enabled && gameState.numbers[0] == tile.value}"> <div class=remember-order-and-value__empty></div> <div ng-show=!gameState.complete class=remember-order-and-value__number>{{tile.value > 0 ? tile.value : null}}</div> </div> </div> </div> </div> </div> </div> '},tzQp:function(e,t){e.exports=Phaser}},["RNTF"]);