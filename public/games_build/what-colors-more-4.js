webpackJsonp([9],{"/x3V":function(e,t,n){"use strict";n("/jXN").module("wgGame",["wgCore"]).constant("gameName","what-colors-more-4")},"1CKG":function(e,t,n){"use strict";var s,a;s=[n("/jXN")],void 0!==(a=function(e){function t(e,t,n,s){function a(e,s){t.answer(n.mapKeyToAnswer(s))}var r=0;t.isTraining=!0,t.gameState=n.buildInitialGameState(),t.answer=function(a){a===t.mapGameStateToAnswer()&&(r++,r>2?e.go("game"):s(function(){return n.handleAnswer(a)},0))},t.$on("keydown",a),t.mapGameStateToAnswer=function(){return n.mapGameStateToAnswer()},s(function(){n.buildGameState()},0)}e.module("wgGame").config(["$stateProvider",function(e){e.state("game-training",{views:{pages:{template:n("rdkU"),controller:["$state","$scope","MatchGameStrategy","$timeout",t]}}})}])}.apply(t,s))&&(e.exports=a)},"8v5g":function(e,t){e.exports=PIXI},HWZb:function(e,t){e.exports=p2},bRJK:function(e,t,n){"use strict";angular.module("wgGame").run(["$state",function(e){e.go("firstGameIframe"==window.name?"screen11":"loading")}])},"fti+":function(e,t){e.exports=' <div ng-controller=GameCtrl class="game-screen game-screen--what-colors-more-4"> <wg-menu></wg-menu> <wg-answer-result></wg-answer-result> <div ui-view=stages></div> <div class=what-colors-more-4> <div class=what-colors-more-4__inner> <h5 class="what-colors-more-4__task-text game-screen__task" ng-bind-html="\'game.title\'|translate"></h5> <div class=what-colors-more-4__items-wrap ng-class=gameState.matrixClass ng-if=gameState.init> <div class=what-colors-more-4__items ng-class="{\'what-colors-more-4__items--come\': !gameState.disableAnswer && (gameState.init || !gameState.answer), \'what-colors-more-4__items--leave\': gameState.answer}"> <div ng-style="{visibility: gameState.hidden ? \'hidden\' : \'visible\'}" ng-repeat="item in gameState.items track by $index" ng-class="\'what-colors-more-4__item what-colors-more-4__item--\' + item.color"> <svg ng-if=item.color class=what-colors-more-4__item-inner width=35 height=35 fill=currentColor> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href="" ng-href="{{gameState.img + \'#\' + item.shape}}"></use> </svg> </div> </div> </div> </div> <div class="button-set button-set--plus"> <button ng-repeat="btn in gameState.buttons" class="{{\'button-set__item button-set__item--\' + btn.cls}}" ng-class="{\'button-set__item--active\':btn.active}" ng-click=answer(btn.answer) type=button> <span class=button-set__icon> <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 14 24"> <path d="M.5 17v4.6c0 1.8 1.2 2.53 2.65 1.63l9.46-9.57a1.76 1.76 0 0 0 0-3.26L3.15.88C1.7 0 .5.72.5 2.52V17zm0-14.48"/> </svg> </span> <span class=button-set__text>{{ btn.text|translate|capitalize }}</span> </button> </div> </div> </div> '},hJMN:function(e,t,n){"use strict";var s=n("d7EF"),a=function(e){return e&&e.__esModule?e:{default:e}}(s);angular.module("wgGame").service("MatchGameStrategy",["$rootScope","wgProperties","$timeout","wgWaitSeconds","$q",function(e,t,s,r,i){function o(e,t){var n=_.shuffle(u),s=_.reverse(_.range(u.length).map(function(t){return e+t})),a=_.chain(n).zip(s).flatMap(function(e){return _.times(e[1],function(){return e[0]})}).value(),r=_.times(t-a.length,function(){return""}),i=_.concat(a,r);return[n,_.shuffle(i.map(function(e){return{color:e,shape:_.sample(w)}}))]}var l,c,m=t.build(),u=["red","blue","green","yellow"],w=["triangle","circle","square","star"],g=[{cls:"left",answer:u[0],text:""},{cls:"right",answer:u[1],text:""},{cls:"down",answer:u[3],text:""},{cls:"up",answer:u[2],text:""}];this.buildInitialGameState=function(){return c={init:!1,answer:!1,items:[],shapes:w,taskColors:[],answerIndex:0,currentAnswer:0,disableAnswer:"edge"==e.browser.name||e.isMobile,img:n("weSL"),buttons:g}},this.buildGameState=function(){return l&&l.resolve(),l=i.defer(),c.answer=c.init,r(c.init&&!c.disableAnswer?.4:0)().then(function(){c.init=!0,c.answer=!1,c.disableAnswer&&(c.hidden=!0,s(function(){c.hidden=!1},500));var e=m.getProperty("matrix.n")||4,t=m.getProperty("matrix.m")||4,n=m.getProperty("matrix.minNumberOfElements")||1,r=o(n,e*t),i=(0,a.default)(r,2),l=i[0],u=i[1];c.taskColors=l,c.answerIndex=0,c.currentAnswer=l[0],c.items=u;var w=e*t;return c.matrixClass=w<49?"what-colors-more-4__items-wrap--low-level":w>65?"what-colors-more-4__items-wrap--high-level":"what-colors-more-4__items-wrap--middle-level",c})},this.mapGameStateToAnswer=function(){return c.currentAnswer},this.handleAnswer=function(e){var t=_.find(g,function(t){return t.answer==e});t.active=!0,s(function(){return t.active=!1},300);var n=c.currentAnswer==e;return n&&c.answerIndex<2?(c.answerIndex+=1,c.currentAnswer=c.taskColors[c.answerIndex],c.items.filter(function(t){return t.color==e}).forEach(function(e){e.color=null})):c.currentAnswer=null,n},this.isReadyForNextState=function(){return null==c.currentAnswer},this.destroyGameState=function(){},this.isOver=function(){return!l.promise||l.promise},this.handleAnswerResult=function(e,t){return l.resolve(),!0},this.mapKeyToAnswer=function(e){switch(e){case 38:return u[2];case 40:return u[3];case 39:return u[1];case 37:return u[0]}}}])},mHkZ:function(e,t,n){"use strict";n("/x3V"),n("zGi5"),n("hJMN"),n("6Tig"),n("oVGP"),n("bRJK"),n("1CKG")},oVGP:function(e,t){},rdkU:function(e,t){e.exports='<div class="game-screen game-screen--what-colors-more-4"> <div class=what-colors-more-4> <div class=what-colors-more-4__inner> <h3 class="what-colors-more-4__task-text game-screen__task">{{\'game.title\'|translate|capitalize}}</h3> <div class=what-colors-more-4__items-wrap ng-class=gameState.matrixClass ng-if=gameState.init> <div class=what-colors-more-4__items ng-class="{\'what-colors-more-4__items--come\': gameState.init || !gameState.answer, \'what-colors-more-4__items--leave\': gameState.answer}"> <div ng-style="{visibility: gameState.hidden ? \'hidden\' : \'visible\'}" ng-repeat="item in gameState.items track by $index" ng-class="\'what-colors-more-4__item what-colors-more-4__item--\' + item.color"> <svg ng-if=item.color class=what-colors-more-4__item-inner width=35 height=35 fill=currentColor> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href="" ng-href="{{gameState.img + \'#\' + item.shape}}"></use> </svg> </div> </div> </div> </div> <div class="button-set button-set--plus"> <button ng-repeat="btn in gameState.buttons" class="{{\'button-set__item button-set__item--\' + btn.cls}}" ng-class="{\'button-set__item--active\':btn.active, \'game-answer-hint\': isTraining && gameState.currentAnswer == btn.answer && !gameState.answer}" ng-click=answer(btn.answer) type=button> <span class=button-set__icon> <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 14 24"> <path d="M.5 17v4.6c0 1.8 1.2 2.53 2.65 1.63l9.46-9.57a1.76 1.76 0 0 0 0-3.26L3.15.88C1.7 0 .5.72.5 2.52V17zm0-14.48"/> </svg> </span> <span class=button-set__text>{{ btn.text|translate|capitalize }}</span> </button> </div> </div> </div> '},tzQp:function(e,t){e.exports=Phaser},weSL:function(e,t,n){e.exports=n.p+"images/3aa5d862850fb796b807379cd65dcfee.svg"},zGi5:function(e,t,n){"use strict";angular.module("wgGame").config(["$stateProvider",function(e){e.state("game",{views:{pages:{templateUrl:"game-container.html"},"container@game":{template:n("fti+")}}})}])}},["mHkZ"]);