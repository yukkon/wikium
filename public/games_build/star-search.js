webpackJsonp([10],{"832T":function(t,i){},"8v5g":function(t,i){t.exports=PIXI},AsEF:function(t,i,e){"use strict";e("EKRk"),e("IZzR"),e("xqGZ"),e("6Tig"),e("832T"),e("DHmI"),e("YDxr")},DHmI:function(t,i,e){"use strict";angular.module("wgGame").run(["$state",function(t){t.go("loading")}])},EKRk:function(t,i,e){"use strict";e("/jXN").module("wgGame",["wgCore"]).constant("gameName","star-search")},HWZb:function(t,i){t.exports=p2},IZzR:function(t,i,e){"use strict";angular.module("wgGame").config(["$stateProvider",function(t){t.state("game",{views:{pages:{templateUrl:"game-container.html"},"container@game":{template:e("hN+p")}}})}])},"WHD+":function(t,i){t.exports='<div class="game-screen game-tutorial game-screen--star-search"> <div class=star-search> <div class=star-search__background></div> <div class=star-search__inner> <h3 class="game-screen__task star-search__task-text"> {{ \'game.title\'|translate }} </h3> <div class=star-search__items> <button class="star-search__item star-search__item--tutorial star-search__item--blue"> <svg class=star-search__item-inner width=43> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=/games_build/images/icons/star-search-symbols.svg#figure-1></use> </svg> </button> <button class="star-search__item star-search__item--tutorial star-search__item--green"> <svg class=star-search__item-inner width=43> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=/games_build/images/icons/star-search-symbols.svg#figure-2></use> </svg> </button> <button class=star-search__item></button> <button class="star-search__item star-search__item--tutorial star-search__item--blue"> <svg class=star-search__item-inner width=43> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=/games_build/images/icons/star-search-symbols.svg#figure-1></use> </svg> </button> <button class="star-search__item star-search__item--tutorial star-search__item--blue"> <svg class=star-search__item-inner width=43> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=/games_build/images/icons/star-search-symbols.svg#figure-2></use> </svg> <div class=game-tutorial__arm></div> </button> <button class=star-search__item></button> <button class="star-search__item star-search__item--tutorial star-search__item--blue"> <svg class=star-search__item-inner width=43> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=/games_build/images/icons/star-search-symbols.svg#figure-1></use> </svg> </button> <button class="star-search__item star-search__item--tutorial star-search__item--green"> <svg class=star-search__item-inner width=43> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=/games_build/images/icons/star-search-symbols.svg#figure-2></use> </svg> </button> <button class="star-search__item star-search__item--tutorial"></button> </div> </div> </div> <div class="game-screen game-screen--tutorial game-tutorial" ng-click=$ctrl.play()> <div class=game-screen__inner> <div class=game-screen__text ng-bind-html="\'game.tutorial_screen.info\'|translate"></div> </div> </div> </div> '},YDxr:function(t,i,e){"use strict";var s,a;s=[e("/jXN")],void 0!==(a=function(t){function i(t){this.play=function(){t.go("game")}}t.module("wgGame").config(["$stateProvider",function(t){t.state("game-tutorial",{views:{"tutorial@":{template:e("WHD+"),controller:["$state",i],controllerAs:"$ctrl"}}})}])}.apply(i,s))&&(t.exports=a)},"hN+p":function(t,i){t.exports='<div ng-controller=GameCtrl class="game-screen game-screen--star-search"> <wg-answer-result></wg-answer-result> <wg-menu></wg-menu> <div ui-view=stages></div> <div class=star-search> <div class=star-search__background></div> <div class=star-search__inner> <h3 class="game-screen__task star-search__task-text"> {{ \'game.title\'|translate }} </h3> <div class=star-search__items ng-class=gameState.matrixClass> <button class=star-search__item ng-repeat="item in gameState.allItems() track by $index" ng-click="item ? answer(item) : null" ng-class=gameState.itemClasses(item)> <svg class=star-search__item-inner width=100% height=100% ng-if=item> <use ng-href="{{ \'/games_build/images/icons/star-search-symbols.svg#\' + item.figure }}" xlink:href=""/> </svg> </button> </div> </div> </div> </div> '},tzQp:function(t,i){t.exports=Phaser},xqGZ:function(t,i,e){"use strict";var s=e("PFIM");angular.module("wgGame").service("MatchGameStrategy",["wgError","wgProperties","wgWaitSeconds","$timeout",function(t,i,a,r){function n(t){if(t)return["star-search__item--"+t.color,"star-search__item--"+t.position]}function o(t,i){var e,a;return t&&t.onlyUnique().length>=2&&i&&i.onlyUnique().length>=2?2===t.onlyUnique().length&&2===i.onlyUnique().length&&4===h?(e=s.getRandomFromArray(l.getProperty("matrix.figures")),a=s.getRandomFromArray(l.getProperty("matrix.colors"))):(e=s.getRandomFromArray(i.onlyUnique()),a=s.getRandomFromArray(t.onlyUnique())):(e=i&&i.onlyUnique().length>2?s.getRandomFromArray(i.onlyUnique()):s.getRandomFromArray(l.getProperty("matrix.figures")),a=t&&t.onlyUnique().length>=2?s.getRandomFromArray(t.onlyUnique()):s.getRandomFromArray(l.getProperty("matrix.colors"))),{id:a+"-"+e,color:a,position:s.getRandomFromArray(["left","right"]),figure:e}}var c,h,l=i.build();this.buildInitialGameState=function(){return e("yiWv"),c={itemClasses:n,allItems:function(){return _.flatten(c.matrix)},matrix:null,matrixClass:""}},this.buildGameState=function(){var t=l.getProperty("matrix.n"),i=l.getProperty("matrix.m"),e=[],a=[],n=[],u=[];h=s.getRandomInt(2,l.getProperty("matrix.count"));for(var m=0;m<h;m++){for(var g=o();e.findIndex(function(t){return t.id===g.id})>=0;)g=o();a.push(g.color),n.push(g.figure),e.push(g);for(var v=0;v<3;v++)u.push(g)}for(var d=[],p=l.getProperty("matrix.numberOf.empty.minPart"),f=l.getProperty("matrix.numberOf.empty.maxPart"),x=p+(f-p)*Math.random();u.length<t*i;){var y=angular.copy(s.getRandomFromArray(e));Math.random()<x&&(y=null),u.push(y)}for(var w=o(a,n);u.findIndex(function(t){return null===t?0:t.id===w.id})>=0;)w=o(a,n);u[0]=w,u=u.shuffle();for(var b=0;b<i;b++){for(var k=[],v=0;v<t;v++)k.push(u.shift());d.push(k)}c.matrix=[],c.target=null,r(function(){var t=_.flatten(d).length;c.matrixClass=t<=24?"star-search__items--low-level":t>=41?"star-search__items--high-level":"star-search__items--middle-level",r(function(){c.target=w,c.matrix=d.shuffle(),c.matrix=d},0)},400)},this.handleAnswer=function(t){return t.id===c.target.id},this.isReadyForNextState=function(){return!0},this.destroyGameState=function(){}}])},yiWv:function(t,i,e){"use strict";(function(t){!function(){var i,e;i=e=function(){},e.prototype.init=function(i){return this.$el=t(i),this.container=i,this.canvas=document.createElement("canvas"),this.sizeCanvas(),this.container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.particleNetwork=new a(this),this.bindUiActions(),this},e.prototype.bindUiActions=function(){t(window).on("resize",function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.sizeCanvas(),this.particleNetwork.createParticles()}.bind(this))},e.prototype.sizeCanvas=function(){this.canvas.width=this.container.offsetWidth,this.canvas.height=this.container.offsetHeight};var s=function(t,i,e){this.network=t,this.canvas=t.canvas,this.ctx=t.ctx,this.particleColor=n(this.network.options.particleColors),this.radius=r(1.5,2.5),this.opacity=0,this.x=i||Math.random()*this.canvas.width,this.y=e||Math.random()*this.canvas.height,this.velocity={x:(Math.random()-.5)*t.options.velocity,y:(Math.random()-.5)*t.options.velocity}};s.prototype.update=function(){this.opacity<1?this.opacity+=.01:this.opacity=1,(this.x>this.canvas.width+100||this.x<-100)&&(this.velocity.x=-this.velocity.x),(this.y>this.canvas.height+100||this.y<-100)&&(this.velocity.y=-this.velocity.y),this.x+=this.velocity.x,this.y+=this.velocity.y},s.prototype.draw=function(){this.ctx.beginPath(),this.ctx.fillStyle=this.particleColor,this.ctx.globalAlpha=this.opacity,this.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),this.ctx.fill()};var a=function(t){this.options={velocity:1,density:1e4,netLineDistance:400,netLineColor:"#929292",particleColors:["#aaa"]},this.canvas=t.canvas,this.ctx=t.ctx,this.init()};a.prototype.init=function(){this.createParticles(!0),this.animationFrame=requestAnimationFrame(this.update.bind(this))},a.prototype.createParticles=function(t){var i=this;this.particles=[];var e=this.canvas.width*this.canvas.height/this.options.density;if(t){var a=0;clearInterval(this.createIntervalId),this.createIntervalId=setInterval(function(){a<e-1?this.particles.push(new s(this)):clearInterval(i.createIntervalId),a++}.bind(this),250)}else for(var r=0;r<e;r++)this.particles.push(new s(this))},a.prototype.createInteractionParticle=function(){return this.interactionParticle=new s(this),this.interactionParticle.velocity={x:0,y:0},this.particles.push(this.interactionParticle),this.interactionParticle},a.prototype.removeInteractionParticle=function(){var t=this.particles.indexOf(this.interactionParticle);t>-1&&(this.interactionParticle=void 0,this.particles.splice(t,1))},a.prototype.update=function(){if(this.canvas){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.globalAlpha=1;for(var t=0;t<this.particles.length;t++)for(var i=this.particles.length-1;i>t;i--){var e,s=this.particles[t],a=this.particles[i];(e=Math.min(Math.abs(s.x-a.x),Math.abs(s.y-a.y)))>this.options.netLineDistance||(e=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)))>this.options.netLineDistance||(this.ctx.beginPath(),this.ctx.strokeStyle=this.options.netLineColor,this.ctx.globalAlpha=(this.options.netLineDistance-e)/this.options.netLineDistance*s.opacity*a.opacity,this.ctx.lineWidth=.7,this.ctx.moveTo(s.x,s.y),this.ctx.lineTo(a.x,a.y),this.ctx.stroke())}for(var t=0;t<this.particles.length;t++)this.particles[t].update(),this.particles[t].draw();0!==this.options.velocity&&(this.animationFrame=requestAnimationFrame(this.update.bind(this)))}else cancelAnimationFrame(this.animationFrame)};var r=function(t,i,e){var s=Math.random()*(i-t)+t;return e&&(s=Math.round(s)),s},n=function(t){return t[Math.floor(Math.random()*t.length)]};(new i).init(t(".star-search__background")[0])}()}).call(i,e("7t+N"))}},["AsEF"]);