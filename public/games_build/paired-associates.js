webpackJsonp([20],{"1/uI":function(e,s,i){"use strict";var t,a;t=[i("/jXN")],void 0!==(a=function(e){function s(e,s,i,t){var a=0;s.gameState=i.buildInitialGameState(),s.answer=function(t){t==s.gameState.requested&&(i.handleAnswer(t),i.isReadyForNextState()&&(a++,a>2?e.go("game"):i.destroyGameState().then(function(){return i.buildGameState()})))},t(function(){i.buildGameState()},0)}e.module("wgGame").config(["$stateProvider",function(e){e.state("game-training",{views:{pages:{template:i("f0ix"),controller:["$state","$scope","MatchGameStrategy","$timeout",s]}}})}])}.apply(s,t))&&(e.exports=a)},"8v5g":function(e,s){e.exports=PIXI},Ey13:function(e,s,i){"use strict";angular.module("wgGame").service("MatchGameStrategy",["wgProperties","wgWaitSeconds","$timeout","$q",function(e,s,i,t){function a(){return{n:x.getProperty("matrix.n")||7,m:x.getProperty("matrix.m")||4,countOfBoxes:x.getProperty("matrix.countOfBoxes")||2}}function n(){var e=a(),s=o(e.n,e.m,e.countOfBoxes);v.boxes=s,v.allBoxes=_.chain(v.boxes).concat(_.times(e.n*e.m-s.length,function(){return{}})).shuffle().value()}function o(e,s,i){var t=Math.floor(e/2),a=Math.floor(s/2),n=a*e+t;return r(e,s).remove(n).shuffle().take(i)}function r(e,s){for(var i=[],t=_.range(1,31).shuffle(),a=0;a<s;a++)for(var n=0;n<e;n++){var o=t.pop();i.push(c(n,a,o))}return i}function c(e,s,i){return new m(e,s,i)}function d(){var e=t.when();return v.boxes.shuffle().forEach(function(i){e=e.then(i.open.bind(i)).then(s(x.getProperty("timing.box.openTime"))).then(i.close.bind(i)).then(s(x.getProperty("timing.box.closeTime")))}),e}function l(){v.boxes.forEach(function(e){e.enabled=!0})}function g(){v.boxes.forEach(function(e){e.enabled=!1})}function u(){v.boxes.forEach(function(e){e.hide()})}function f(){v.answer=v.init,v.boxes.length&&i(function(){v.answer=!1,v.init=!0,v.requested=null,i(function(){v.requested=v.boxes.last(),v.isAnimationEnd=!0},50)},v.init?600:0)}function p(){v.boxes.forEach(function(e){e.open()})}function h(){v.boxes=null}function m(e,s,i){this.n=e,this.m=s,this.id=i,this.opened=!1,this.visible=!0,this.wrong=!1}var v,b,x=e.build();this.buildInitialGameState=function(){return v={boxes:[],matrix:null,correct:!1,answer:!0,ids:_.range(1,31),init:!1,isAnimationEnd:!1}},this.buildGameState=function(){return b&&b.resolve(),b=t.defer(),v.init=!1,v.answer=!0,n(),s(.4)().then(d).then(s(x.getProperty("timing.delayBeforeEnableBoxes"))).then(l).then(f)},this.handleAnswer=function(e){if(v.isAnimationEnd)return v.correct=e.id===v.requested.id,v.correct?(e.correct=!0,v.boxes.pop(),f()):(v.answer=!0,e&&e.markWrong&&e.markWrong()),v.isAnimationEnd=!1,v.correct},this.isReadyForNextState=function(){return v.boxes.length<=0||!v.correct},this.isOver=function(){return!b.promise||b.promise},this.destroyGameState=function(){return g(),p(),i(function(){return v.requested=null},400),s(x.getProperty("timing.delayAfterShowingMissingTiles"))().then(u).then(s(x.getProperty("timing.delayForHidingMatrix"))).then(h).then(s(x.getProperty("timing.delayBeforeStartNextLevel"))).then(function(){b.resolve()})},m.prototype.getClass=function(){return this.correct?"paired-associates__box--target ":this.opened?"paired-associates__box--open ":this.active?"paired-associates__box--active ":""},m.prototype.open=function(){this.opened=!0},m.prototype.close=function(){this.opened=!1,this.active=!0},m.prototype.hide=function(){this.visible=!1},m.prototype.markWrong=function(){this.wrong=!0}}]),angular.module("wgGame").directive("aDisabled",function(){return{compile:function(e,s,i){return s.ngClick="!("+s.aDisabled+") && ("+s.ngClick+")",function(e,s,i){e.$watch(i.aDisabled,function(e){void 0!==e&&s.toggleClass("disabled",e)}),s.on("click",function(s){e.$eval(i.aDisabled)&&s.preventDefault()})}}}})},HWZb:function(e,s){e.exports=p2},JFf9:function(e,s,i){"use strict";i("iFdq"),i("LHho"),i("Ey13"),i("6Tig"),i("QXzj"),i("LtgT"),i("1/uI")},LHho:function(e,s,i){"use strict";angular.module("wgGame").config(["$stateProvider",function(e){e.state("game",{views:{pages:{templateUrl:"game-container.html"},"container@game":{template:i("p+6f")}}})}])},LtgT:function(e,s,i){"use strict";angular.module("wgGame").run(["$state",function(e){e.go("loading")}])},QXzj:function(e,s){},f0ix:function(e,s){e.exports='<div class="game-screen game-screen--paired-associates"> <div class="paired-associates paired-associates--pink"> <div class=paired-associates__inner> <div class=paired-associates__reference ng-class="{\'paired-associates__reference--go-out\': gameState.answer && gameState.init,  \'paired-associates__reference--come-in\': !gameState.answer}"> <svg ng-repeat="id in gameState.ids" ng-if="id == gameState.requested.id" class=paired-associates__reference-icon width=52 height=52> <use xlink:href="" ng-href="{{\'/games_build/images/icons/paired-associates-symbols.svg#\' + id}}"/> </svg> <svg class=paired-associates__reference-picture xmlns=http://www.w3.org/2000/svg viewBox="0 0 123 107.02"><defs><linearGradient id=a x1=8.5 x2=73.5 y1=115.52 y2=50.52 gradientUnits=userSpaceOnUse><stop offset=0 stop-opacity=0 /><stop offset=.69 /></linearGradient></defs><path fill=#57371e d="M7 18v82h116V18zm109 75H14V25h102z"/><path fill=#f14c74 d="M14.16 25h102v68h-102z"/><path fill=#713616 d="M39.77 18.734L64.728.864l.58.81-24.956 17.87z"/><path fill=#713616 d="M64.868 1.404l.584-.812 25.005 18-.584.813z"/><circle cx=65.66 cy=2.5 r=2.5 fill=#ffecb7 /><path fill=url(#a) d="M7 18.02l-7 7v82h116l7-7H7v-82" opacity=.1 /></svg> <div class=paired-associates__chest-shadow></div> </div> <div class=paired-associates__items> <button ng-repeat="box in gameState.allBoxes" ng-class="box.getClass() + (box == gameState.requested && !gameState.answer ? \' game-answer-hint\' : \'\')" ng-disabled=!box.enabled ng-click=answer(box) class=paired-associates__box> <svg ng-if=box.id class=paired-associates__box-icon width=50 height=50> <use xlink:href="" ng-href="{{\'/games_build/images/icons/paired-associates-symbols.svg#\' + box.id}}"/> </svg> </button> <div class=paired-associates__bg-items> <svg class=paired-associates__bg-books width=110 height=58> <use xlink:href=/games_build/images/icons/paired-associates-symbols.svg#books /> </svg> <svg class=paired-associates__bg-lamp width=193 height=353> <use xlink:href=/games_build/images/icons/paired-associates-symbols.svg#lapm /> </svg> </div> </div> </div> </div> </div> '},iFdq:function(e,s,i){"use strict";i("/jXN").module("wgGame",["wgCore"]).constant("gameName","paired-associates")},"p+6f":function(e,s){e.exports='<div ng-controller=GameCtrl class="game-screen game-screen--paired-associates"> <wg-menu></wg-menu> <div ui-view=stages></div> <div class="paired-associates paired-associates--pink"> <div class=paired-associates__inner> <div class=paired-associates__reference ng-class="{\'paired-associates__reference--go-out\': gameState.answer && gameState.init,  \'paired-associates__reference--come-in\': !gameState.answer}"> <svg ng-repeat="id in gameState.ids" ng-if="gameState.requested && id == gameState.requested.id" class=paired-associates__reference-icon width=52 height=52> <use xlink:href="" ng-href="{{\'/games_build/images/icons/paired-associates-symbols.svg#\' + id}}"/> </svg> <svg class=paired-associates__reference-picture xmlns=http://www.w3.org/2000/svg viewBox="0 0 123 107.02"><defs><linearGradient id=a x1=8.5 x2=73.5 y1=115.52 y2=50.52 gradientUnits=userSpaceOnUse><stop offset=0 stop-opacity=0 /><stop offset=.69 /></linearGradient></defs><path fill=#57371e d="M7 18v82h116V18zm109 75H14V25h102z"/><path fill=#f14c74 d="M14.16 25h102v68h-102z"/><path fill=#713616 d="M39.77 18.734L64.728.864l.58.81-24.956 17.87z"/><path fill=#713616 d="M64.868 1.404l.584-.812 25.005 18-.584.813z"/><circle cx=65.66 cy=2.5 r=2.5 fill=#ffecb7 /><path fill=url(#a) d="M7 18.02l-7 7v82h116l7-7H7v-82" opacity=.1 /></svg> <div class=paired-associates__chest-shadow></div> </div> <div class=paired-associates__items> <button ng-repeat="box in gameState.allBoxes" ng-class=box.getClass() ng-disabled=!box.enabled ng-click=answer(box) class=paired-associates__box> <svg ng-if=box.id class=paired-associates__box-icon width=50 height=50> <use xlink:href="" ng-href="{{\'/games_build/images/icons/paired-associates-symbols.svg#\' + box.id}}"/> </svg> </button> <div class=paired-associates__bg-items> <svg class=paired-associates__bg-books width=110 height=58> <use xlink:href=/games_build/images/icons/paired-associates-symbols.svg#books /> </svg> <svg class=paired-associates__bg-lamp width=193 height=353> <use xlink:href=/games_build/images/icons/paired-associates-symbols.svg#lapm /> </svg> </div> </div> </div> </div> <wg-answer-result></wg-answer-result> </div> '},tzQp:function(e,s){e.exports=Phaser}},["JFf9"]);