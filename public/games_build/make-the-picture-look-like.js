webpackJsonp([26],{"8v5g":function(e,t){e.exports=PIXI},"CS/J":function(e,t,i){"use strict";angular.module("wgGame").run(["$state",function(e){e.go("loading")}])},Eb0q:function(e,t,i){"use strict";i("bp2f"),i("gLrc"),i("vgRY"),i("6Tig"),i("x0Cr"),i("CS/J"),i("eU1E")},HWZb:function(e,t){e.exports=p2},MDe7:function(e,t){e.exports='<div ng-controller=GameCtrl class="game-screen game-screen--make-the-picture-look-like"> <wg-menu></wg-menu> <div ui-view=stages></div> <div class=make-the-picture-look-like ng-class="{\'game-state-init\': gameState.answerAnimation}"> <div class=make-the-picture-look-like__inner> <div class=make-the-picture-look-like__items ng-if="gameState.matrix.tiles.length > 0"> <div class=make-the-picture-look-like__line ng-repeat="line in gameState.matrix.tiles"> <div ng-repeat="tile in line" class=make-the-picture-look-like__item ng-class="{\'make-the-picture-look-like__item--active\': !tile.success && tile.opened, \'make-the-picture-look-like__item--target\': gameState.complete && tile.modified && !tile.modifiedToOpen && !tile.opened && tile.success, \'make-the-picture-look-like__item--error\': gameState.complete && (tile.modifiedToOpen == tile.opened), \'make-the-picture-look-like__item--success\': tile.success}" ng-click="tile.enabled ? answer(tile) : null"> <div class=make-the-picture-look-like__item-inner> <div class=make-the-picture-look-like__front></div> <div class=make-the-picture-look-like__back></div> </div> </div> </div> </div> </div> </div> </div> '},Nr7P:function(e,t){e.exports='<div class="game-screen game-tutorial game-screen--make-the-picture-look-like" ng-class="{\'game-state-init\': gameState.answer}"> <div class=make-the-picture-look-like ng-class="{\'game-state-init\': gameState.answerAnimation}"> <div class=make-the-picture-look-like__inner> <h5 class="game-screen__task make-the-picture-look-like__instruction" ng-bind-html="\'game.title\'|translate"></h5> <div class=make-the-picture-look-like__items ng-if=gameState.matrix.tiles.length> <div class=make-the-picture-look-like__line ng-repeat="line in gameState.matrix.tiles"> <div ng-repeat="tile in line" class=make-the-picture-look-like__item ng-class="{\'make-the-picture-look-like__item--active\': !tile.success && tile.opened, \'make-the-picture-look-like__item--target\': gameState.complete && tile.modified && !tile.modifiedToOpen && !tile.opened && tile.success, \'make-the-picture-look-like__item--error\': gameState.complete && (tile.modifiedToOpen == tile.opened), \'make-the-picture-look-like__item--success\': tile.success, \'game-answer-hint\': tile.modified && !gameState.complete}" ng-click="tile.enabled ? answer(tile) : null"> <div class=make-the-picture-look-like__item-inner> <div class=make-the-picture-look-like__front></div> <div class=make-the-picture-look-like__back></div> </div> </div> </div> </div> </div> </div> </div> '},bp2f:function(e,t,i){"use strict";i("/jXN").module("wgGame",["wgCore"]).constant("gameName","make-the-picture-look-like")},eU1E:function(e,t,i){"use strict";var n,a;n=[i("/jXN")],void 0!==(a=function(e){function t(e,t,i,n,a){var o=0;t.gameState=i.buildInitialGameState(),t.answer=function(t){t.modified&&(i.handleAnswer(t),o++,o>2?e.go("game"):i.destroyGameState().then(a(0)).then(function(){return i.buildGameState()}))},t.mapGameStateToAnswer=function(){return i.mapGameStateToAnswer()},n(function(){i.buildGameState()},0)}e.module("wgGame").config(["$stateProvider",function(e){e.state("game-training",{views:{pages:{template:i("Nr7P"),controller:["$state","$scope","MatchGameStrategy","$timeout","wgWaitSeconds",t]}}})}])}.apply(t,n))&&(e.exports=a)},gLrc:function(e,t,i){"use strict";angular.module("wgGame").config(["$stateProvider",function(e){e.state("game",{views:{pages:{templateUrl:"game-container.html"},"container@game":{template:i("MDe7")}}})}])},tzQp:function(e,t){e.exports=Phaser},vgRY:function(e,t,i){"use strict";var n=i("woOf"),a=function(e){return e&&e.__esModule?e:{default:e}}(n);angular.module("wgGame").service("MatchGameStrategy",["$rootScope","MatrixService","wgError","wgProperties","wgWaitSeconds","$timeout","$q",function(e,t,i,n,o,r,l){function c(){x.complete=!1;var e=d();x.matrix=u(e.n,e.m)}function s(){x.init=!0,x.answerAnimation=!1,x.answer=!1,x.matrix.forEachTile(function(e){e.creating=!1})}function m(){function e(e){e.opened=!e.opened,e.modified=!0,e.modifiedToOpen=e.opened}var t=d().modify.min,i=d().modify.max,n=t+Math.floor((i-t)*Math.random()),a=[],o=[];x.matrix.forEachTile(function(e){e.opened?a.push(e):o.push(e)});var r=_.random(0,n),l=n-r,c=_.chain(a).shuffle().take(r).value(),s=_.chain(o).shuffle().take(l).value();c.forEach(function(t){e(t)}),s.forEach(function(t){e(t)}),x.modifiedLeft=n}function u(e,t){for(var i=[],n=f(e,t),a=0;a<t;a++){for(var o=[],r=0;r<e;r++){var l=new w;l.opened=n.pop(),p(l,500*Math.random()),o.push(l)}i.push(o)}return new v(e,t,i)}function d(){var t=y.getProperty("matrix")||{n:2,m:2,open:{min:2,max:4},modify:{min:1,max:1}};return e.isMobile&&t.n>t.m?(0,a.default)({},t,{n:t.m,m:t.n}):t}function f(e,t){var i,n=[],a=d().open.min,o=d().open.max,r=a+Math.floor((o-a)*Math.random()),l=e*t-r;for(i=r;--i>=0;)n.push(!0);for(i=l;--i>=0;)n.push(!1);return n.sort(function(){return Math.random()-.5}),n}function p(e,t){r(function(){e.creating=!0},t)}function h(){x.matrix.forEachTile(function(e){e.class="clickable",e.enabled=!0})}function g(){x.matrix.forEachTile(function(e){e.enabled=!1})}function k(){x.matrix=null}function v(e,t,i){this.n=e,this.m=t,this.tiles=i}function w(){this.enabled=!1,this.opened=!1,this.modified=!1,this.creating=!0}var x,S,y=n.build();this.buildInitialGameState=function(){return x={matrix:null,clickLeft:0,modifiedLeft:0,init:!1,complete:!1,answerAnimation:!1,answer:!1}},this.buildGameState=function(){return S&&S.resolve(),S=l.defer(),x.clickLeft=y.getProperty("maxClicks")||1,x.answer=x.init,x.answerAnimation=!0,o(0)().then(c).then(o(.5)).then(s).then(o(y.getProperty("timing.showTime"))).then(m).then(h).then(o(y.getProperty("timing.delayBeforeSuspendTheGame")))},this.handleAnswer=function(e){if(e.opened=!e.opened,e.modified){if(e.modifiedToOpen===!e.opened?x.modifiedLeft--:x.modifiedLeft++,0===x.modifiedLeft)return e.success=!0,!0}else e.modified=!0,e.modifiedToOpen=e.opened,x.modifiedLeft++;return--x.clickLeft>0&&angular.undefined},this.isReadyForNextState=function(){return 0===x.clickLeft||0===x.modifiedLeft},this.isOver=function(){return!S.promise||S.promise},this.destroyGameState=function(){return g(),x.complete=!0,o(.5)().then(k).then(function(){S.resolve()})},v.prototype.forEachTile=function(e){for(var t=0;t<this.m;t++)for(var i=0;i<this.n;i++)e(this.tiles[t][i])},v.prototype.getTile=function(e,t){return e>=this.x&&i.throw("x out of range"),t>=this.y&&i.throw("y out of range"),this.tiles[t][e]}}]),angular.module("wgGame").service("MatrixService",function(){return{width:0,height:0}}),angular.module("wgGame").controller("MatrixCtrl",["MatrixService","$scope",function(e,t){t.style={width:"",height:""},t.data=e,t.$watch("data.top",function(e){t.style.top=e+"px"}),t.$watch("data.width",function(e){t.style.width=e+"px",t.style.opacity=e>0?1:0}),t.$watch("data.height",function(e){t.style.height=e+"px"})}])},x0Cr:function(e,t){}},["Eb0q"]);